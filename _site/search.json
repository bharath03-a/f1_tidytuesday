[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "F1 Analysis",
    "section": "",
    "text": "The data this week comes from the Ergast API, which has a CC-BY license. H/t to Sara Stoudt for sharing the link to the data by way of Data is Plural!\nFiveThirtyEight published a nice article on “Who’s The Best Formula One Driver Of All Time?”. While the ELO data is not present in this dataset, you could calculate your own rating or using the {elo} package to create ELO scores.\n\n\n\n\nCode\n### GETTING THE LIBRARIES\n1if (!require(pacman))\n  install.packages(pacman)\n\n\npacman::p_load(tidyverse,\n               openintro,\n               gridExtra,\n               tidytuesdayR,\n               dplyr,\n               dlookr,\n               DMwR2,  # Data Mining with R functions\n               GGally, # Pair-wise plots using ggplot2\n               Hmisc,  # Data analysis\n2               formattable)\n\n\n\n1\n\nThis block is to check if pacman package is installed or not, if it isn’t then the package will be installed.\n\n2\n\np_load is a function from pacman package to load other packages, if isn’t installed pacman will handle the installation.\n\n\n\n\nSetting the default theme ggplot and output options for the chunk - as suggested in the class.\n\n\nCode\n### setting theme for ggplot2\nggplot2::theme_set(ggplot2::theme_minimal(base_size = 14, base_family = \"sans\"))\n\n\n# setting width of code output\noptions(width = 65)\n\n# setting figure parameters for knitr\nknitr::opts_chunk$set(\n  fig.width = 8,        # 8\" width\n  fig.asp = 0.618,      # the golden ratio\n  fig.retina = 4,       # dpi multiplier for displaying HTML output on retina\n  fig.align = \"center\", # center align figures\n  dpi = 350             # higher dpi, sharper image\n)\n\n\n\n\n\n\ntuesdata &lt;- tidytuesdayR::tt_load('2021-09-07')\n\n\n    Downloading file 1 of 13: `circuits.csv`\n    Downloading file 2 of 13: `constructor_results.csv`\n    Downloading file 3 of 13: `constructor_standings.csv`\n    Downloading file 4 of 13: `constructors.csv`\n    Downloading file 5 of 13: `driver_standings.csv`\n    Downloading file 6 of 13: `drivers.csv`\n    Downloading file 7 of 13: `lap_times.csv`\n    Downloading file 8 of 13: `pit_stops.csv`\n    Downloading file 9 of 13: `qualifying.csv`\n    Downloading file 10 of 13: `races.csv`\n    Downloading file 11 of 13: `results.csv`\n    Downloading file 12 of 13: `seasons.csv`\n    Downloading file 13 of 13: `status.csv`\n\nresults &lt;- tuesdata$results\ndriver_standings &lt;- tuesdata$driver_standings\nraces &lt;- tuesdata$races\ndrivers &lt;- tuesdata$drivers\n\n\ndriver_results_df &lt;- driver_standings |&gt;\n  left_join(races, by = \"raceId\") |&gt;\n  rename(driver_url = url) |&gt;\n  left_join(drivers, by = \"driverId\") |&gt; filter( year &gt;= 2020)\n\nmissing_count &lt;- colSums(is.na(driver_results_df))\n\nmissing_count\n\ndriverStandingsId            raceId          driverId \n                0                 0                 0 \n           points          position      positionText \n                0                 0                 0 \n             wins              year             round \n                0                 0                 0 \n        circuitId              name              date \n                0                 0                 0 \n             time        driver_url         driverRef \n                0                 0                 0 \n           number              code          forename \n                0                 0                 0 \n          surname               dob       nationality \n                0                 0                 0 \n              url \n                0 \n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nGetting only data after 2017 for relevancy!\n\n\nAs of now the unknowns are age of the drivers, and their position in the races. We need to two new columns to cater that data.\n\ncalculateAge &lt;- function(dob) {\n  # Convert DOB to Date class\n  dob &lt;- as.Date(dob)\n  \n  # Calculate age\n  age &lt;- as.integer(difftime(Sys.Date(), dob, units = \"days\") / 365)\n  \n  return(age)\n}\n\ngetRacePos &lt;- function(position) {\n  case_when(\n    position == 1 ~ \"WINNER\",\n    (position &gt; 1 & position &lt;=3) ~ \"PODIUM\",\n    (position &gt; 3 & position &lt;=10) ~ \"TOP10\",\n    TRUE ~ \"Other\"  # Default case when none of the above conditions are met\n  )\n}\n\n\ndriver_results_df &lt;- driver_results_df |&gt; mutate(\n  drivers_age = calculateAge(driver_results_df$dob),\n  race_pos = getRacePos(driver_results_df$position)\n)\n\n\nggplot(driver_results_df, mapping = aes(x = code, y = drivers_age)) +\n  geom_point(aes(color = race_pos, size=3), stat='identity') + \n  coord_flip()"
  },
  {
    "objectID": "index.html#set-up",
    "href": "index.html#set-up",
    "title": "F1 Analysis",
    "section": "",
    "text": "Code\n### GETTING THE LIBRARIES\n1if (!require(pacman))\n  install.packages(pacman)\n\n\npacman::p_load(tidyverse,\n               openintro,\n               gridExtra,\n               tidytuesdayR,\n               dplyr,\n               dlookr,\n               DMwR2,  # Data Mining with R functions\n               GGally, # Pair-wise plots using ggplot2\n               Hmisc,  # Data analysis\n2               formattable)\n\n\n\n1\n\nThis block is to check if pacman package is installed or not, if it isn’t then the package will be installed.\n\n2\n\np_load is a function from pacman package to load other packages, if isn’t installed pacman will handle the installation.\n\n\n\n\nSetting the default theme ggplot and output options for the chunk - as suggested in the class.\n\n\nCode\n### setting theme for ggplot2\nggplot2::theme_set(ggplot2::theme_minimal(base_size = 14, base_family = \"sans\"))\n\n\n# setting width of code output\noptions(width = 65)\n\n# setting figure parameters for knitr\nknitr::opts_chunk$set(\n  fig.width = 8,        # 8\" width\n  fig.asp = 0.618,      # the golden ratio\n  fig.retina = 4,       # dpi multiplier for displaying HTML output on retina\n  fig.align = \"center\", # center align figures\n  dpi = 350             # higher dpi, sharper image\n)"
  },
  {
    "objectID": "index.html#getting-data",
    "href": "index.html#getting-data",
    "title": "F1 Analysis",
    "section": "",
    "text": "tuesdata &lt;- tidytuesdayR::tt_load('2021-09-07')\n\n\n    Downloading file 1 of 13: `circuits.csv`\n    Downloading file 2 of 13: `constructor_results.csv`\n    Downloading file 3 of 13: `constructor_standings.csv`\n    Downloading file 4 of 13: `constructors.csv`\n    Downloading file 5 of 13: `driver_standings.csv`\n    Downloading file 6 of 13: `drivers.csv`\n    Downloading file 7 of 13: `lap_times.csv`\n    Downloading file 8 of 13: `pit_stops.csv`\n    Downloading file 9 of 13: `qualifying.csv`\n    Downloading file 10 of 13: `races.csv`\n    Downloading file 11 of 13: `results.csv`\n    Downloading file 12 of 13: `seasons.csv`\n    Downloading file 13 of 13: `status.csv`\n\nresults &lt;- tuesdata$results\ndriver_standings &lt;- tuesdata$driver_standings\nraces &lt;- tuesdata$races\ndrivers &lt;- tuesdata$drivers\n\n\ndriver_results_df &lt;- driver_standings |&gt;\n  left_join(races, by = \"raceId\") |&gt;\n  rename(driver_url = url) |&gt;\n  left_join(drivers, by = \"driverId\") |&gt; filter( year &gt;= 2020)\n\nmissing_count &lt;- colSums(is.na(driver_results_df))\n\nmissing_count\n\ndriverStandingsId            raceId          driverId \n                0                 0                 0 \n           points          position      positionText \n                0                 0                 0 \n             wins              year             round \n                0                 0                 0 \n        circuitId              name              date \n                0                 0                 0 \n             time        driver_url         driverRef \n                0                 0                 0 \n           number              code          forename \n                0                 0                 0 \n          surname               dob       nationality \n                0                 0                 0 \n              url \n                0"
  },
  {
    "objectID": "index.html#questions",
    "href": "index.html#questions",
    "title": "F1 Analysis",
    "section": "",
    "text": "Note\n\n\n\nGetting only data after 2017 for relevancy!\n\n\nAs of now the unknowns are age of the drivers, and their position in the races. We need to two new columns to cater that data.\n\ncalculateAge &lt;- function(dob) {\n  # Convert DOB to Date class\n  dob &lt;- as.Date(dob)\n  \n  # Calculate age\n  age &lt;- as.integer(difftime(Sys.Date(), dob, units = \"days\") / 365)\n  \n  return(age)\n}\n\ngetRacePos &lt;- function(position) {\n  case_when(\n    position == 1 ~ \"WINNER\",\n    (position &gt; 1 & position &lt;=3) ~ \"PODIUM\",\n    (position &gt; 3 & position &lt;=10) ~ \"TOP10\",\n    TRUE ~ \"Other\"  # Default case when none of the above conditions are met\n  )\n}\n\n\ndriver_results_df &lt;- driver_results_df |&gt; mutate(\n  drivers_age = calculateAge(driver_results_df$dob),\n  race_pos = getRacePos(driver_results_df$position)\n)\n\n\nggplot(driver_results_df, mapping = aes(x = code, y = drivers_age)) +\n  geom_point(aes(color = race_pos, size=3), stat='identity') + \n  coord_flip()"
  }
]